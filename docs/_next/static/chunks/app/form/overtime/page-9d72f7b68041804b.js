(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7979],{33829:function(e,t,n){"use strict";var i=n(18025);t.Z=void 0;var r=i(n(8911)),s=n(72976),a=(0,r.default)([(0,s.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},"0"),(0,s.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");t.Z=a},55479:function(e,t,n){"use strict";var i=n(18025);t.Z=void 0;var r=i(n(8911)),s=n(72976),a=(0,r.default)((0,s.jsx)("path",{d:"M14 6v15H3v-2h2V3h9v1h5v15h2v2h-4V6h-3zm-4 5v2h2v-2h-2z"}),"MeetingRoom");t.Z=a},29462:function(e,t,n){"use strict";var i=n(18025);t.Z=void 0;var r=i(n(8911)),s=n(72976),a=(0,r.default)((0,s.jsx)("path",{d:"M11 11h-1v2h2v-1l9.73 9.73L20.46 23 14 16.54V21H3v-2h2V7.54l-4-4 1.27-1.27L11 11zm3 .49L5.51 3H14v1h5v12.49l-2-2V6h-3v5.49z"}),"NoMeetingRoom");t.Z=a},56817:function(e,t,n){Promise.resolve().then(n.t.bind(n,54977,23)),Promise.resolve().then(n.t.bind(n,15617,23)),Promise.resolve().then(n.bind(n,96705)),Promise.resolve().then(n.bind(n,49420)),Promise.resolve().then(n.t.bind(n,66005,23)),Promise.resolve().then(n.bind(n,69392)),Promise.resolve().then(n.bind(n,83377)),Promise.resolve().then(n.bind(n,50209)),Promise.resolve().then(n.bind(n,66508)),Promise.resolve().then(n.bind(n,9532)),Promise.resolve().then(n.bind(n,95770)),Promise.resolve().then(n.bind(n,97387))},17091:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(72976),r=n(24988),s=n(60895),a=function(e){let{onChange:t,options:n,...a}=e;return(0,i.jsx)(r.Z,{inputProps:{inputMode:"numeric"},options:{onChange:e=>{if(s.Sz.dateTimeWrite.test(e.currentTarget.value)){let t=s.Sz.dateTimeWrite.exec(e.currentTarget.value);t&&(e.currentTarget.value="".concat(t[1],":").concat(t[2]))}else s.Sz.dateTimeDelete.test(e.currentTarget.value)&&(e.currentTarget.value=e.currentTarget.value.replace(":",""));t&&t(e)},...n},...a})}},68526:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(72976),r=n(31871),s=n(2637),a=n(57627),l=n(38141),o=n(16565),d=function(e){var t,n;let{name:d,error:c,helperText:u,...m}=e,{formState:v,control:p}=(0,o.Gc)();return(0,i.jsxs)(r.Z,{"data-component":"FormSelect",fullWidth:m.fullWidth,children:[(0,i.jsx)(a.Z,{error:c||void 0!==v.errors[d],required:!0,children:m.label}),(0,i.jsx)(o.Qr,{control:p,name:d,render:e=>{let{field:t}=e;return(0,i.jsx)(l.Z,{...t,...m})}}),(0,i.jsx)(s.Z,{error:c||void 0!==v.errors[d],children:(null===(n=v.errors[d])||void 0===n?void 0:null===(t=n.message)||void 0===t?void 0:t.toString())||u})]})}},95770:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var i=n(72976),r=n(18558),s=n(68682),a=n(80562),l=n(57987),o=n(93711),d=n(23768),c=n(65367),u=n(19882),m=n(66630),v=n(77928),p=n(17351),h=n(97855),x=n(46750),Z=n(90828),j=n(85031),y=n(51692),f=n(39664),T=n(16565);function g(){let e=(0,T.cI)({defaultValues:{dates:[]}}),t=(0,y.NL)(),{setSimpleModal:n}=(0,s.Tf)(),{setLoading:g}=(0,s.wz)(),{setToast:b}=(0,s.fp)(),{data:w,refetch:V}=l.Z.useGetApplUserList("overtime"),k=l.Z.usePostOvertimeForm({onMutate:e=>{g({children:"연장근무 신청 ".concat(e.openApiJadeOvertimeFormProps.length,"건 등록 중"),open:!0})},onSettled:()=>{g(void 0)},onSuccess:()=>{var n;let r=null===(n=e.getValues("list"))||void 0===n?void 0:n.length;e.reset(),V(),t.invalidateQueries(["jade","getApplList"]),b({children:(0,i.jsx)(Z.Z,{children:(0,i.jsxs)(j.Z,{variant:"caption",children:[r,"건의 연장근무 신청이 완료됐습니다."]})}),severity:"success",title:"연장근무 신청 완료"})}});(0,f.useEffect)(()=>{e.setValue("to",(null==w?void 0:w.body)||[])},[w]);let P=()=>{let t=e.getValues("list");if(!t||0===t.length)return;let n=null==t?void 0:t.map(e=>{var t,n;let i=(0,a.K0)("".concat(e.date,"T").concat(e.startTime)),r=(0,a.K0)("".concat(e.date,"T").concat(e.endTime));return{applUserList:e.to.map(e=>{let{id:t}=e;return t}),completeRefUserList:null===(t=e.ccc)||void 0===t?void 0:t.map(e=>{let{id:t}=e;return t}),date:{day:i.day.value,month:i.month.value,year:i.year},endTime:{hour:r.hour.value,minute:r.minute.value,type:e.endType||2},reason:e.reason,refUserList:null===(n=e.cc)||void 0===n?void 0:n.map(e=>{let{id:t}=e;return t}),startTime:{hour:i.hour.value,minute:i.minute.value,type:e.startType||2},workType:e.workType}});k.mutate({openApiJadeOvertimeFormProps:n})},C=(0,f.useCallback)(()=>{n({body:"연장근무를 신청하시겠습니까?",confirm:{icon:(0,i.jsx)(u.Z,{}),onClick:()=>{P(),n(void 0)},text:"신청"},title:"연장근무 신청",type:"info"})},[P,n]),z=(0,f.useCallback)(t=>{let n=e.getValues("list")||[],i=e.getValues("dates"),r=(0,a.K0)(t.date),s=n.filter(e=>e.date!==t.date),l=i.filter(e=>e.ymd.milliseconds!==r.epoch);e.setValue("dates",l),e.setValue("list",s)},[e]),A=(0,f.useCallback)(t=>{if(t.length>10){b({children:(0,i.jsx)(Z.Z,{children:(0,i.jsx)(j.Z,{variant:"caption",children:"신청서는 한 번에 10개까지 가능합니다."})}),severity:"error",title:"리스트가 꽉 찼습니다."});return}let n=t.map(e=>{var t;let n=(0,a.K0)(e.ymd.milliseconds),i="".concat(n.year,"-").concat(n.month.text,"-").concat(n.day.text);return{date:i,endTime:"02:00",endType:3,reason:"연장근무 소요로 인한 연장근무 신청",rowDate:"".concat(i," (").concat(n.weekday.text,")"),rowImages:(null==w?void 0:null===(t=w.body)||void 0===t?void 0:t.map(e=>{let{id:t}=e;return t}))||[],rowTitle:"연장근무 신청 (09:30 ~ 익일 02:00)",startTime:"09:30",startType:2,to:(null==w?void 0:w.body)||[],workType:e.workType}});e.setValue("dates",t),e.setValue("list",n)},[e,w,b]);return(0,i.jsx)(o.default,{icon:(0,i.jsx)(m.Z,{color:"primary"}),name:"EasyOverTimeBox",title:"연장근무 신청",children:(0,i.jsx)(r.Z,{form:e,onSubmit:C,children:(0,i.jsxs)(Z.Z,{spacing:4,children:[(0,i.jsx)(Z.Z,{alignItems:"center",justifyContent:"center",children:(0,i.jsx)(c.Z,{selects:e.watch("dates"),type:"overtime",onSelect:A})}),(0,i.jsx)(x.Z,{}),(0,i.jsx)(d.Z,{list:e.watch("list"),onDeleteClick:z}),(0,i.jsx)(Z.Z,{direction:"row",justifyContent:"end",spacing:2,children:(0,i.jsx)(h.Z,{disabled:0===(e.watch("list")||[]).length,startIcon:(0,i.jsx)(u.Z,{}),type:"submit",variant:"outlined",children:"등록"})}),(0,i.jsxs)(v.Z,{severity:"info",children:[(0,i.jsx)(p.Z,{children:"안내"}),(0,i.jsx)(Z.Z,{children:(0,i.jsx)(j.Z,{variant:"caption",children:"휴일 연장 근무 신청은 지원하지 않습니다."})})]})]})})})}},55001:function(e,t,n){"use strict";var i=n(35059);t.Z=i.Z},97387:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var i=n(72976),r=n(18558),s=n(7302),a=n(24988),l=n(17091),o=n(68682),d=n(80562),c=n(60895),u=n(57987),m=n(93711),v=n(23768),p=n(68526),h=n(55001),x=n(33829),Z=n(96293),j=n(19882),y=n(31425),f=n(32255),T=n(55247),g=n(55479),b=n(29462),w=n(66630),V=n(77928),k=n(17351),P=n(97855),C=n(46750),z=n(40913),A=n(49333),I=n(90828),S=n(331),L=n(85031),O=n(51692),W=n(39664),q=n(16565);function D(){var e,t;let n=(0,q.cI)({defaultValues:{endType:2,startType:2}}),D=(0,O.NL)(),{setSimpleModal:K}=(0,o.Tf)(),{setLoading:M}=(0,o.wz)(),{setToast:U}=(0,o.fp)(),{data:E}=u.Z.useUserInfo(),{data:F,isSuccess:N}=u.Z.useGetCalendar({month:(0,d.K0)(n.watch("date")).month.text,year:(0,d.K0)(n.watch("date")).year.toString()}),{data:_,refetch:R}=u.Z.useGetApplUserList("overtime"),G=u.Z.usePostOvertimeForm({onMutate:e=>{M({children:"연장근무 신청 ".concat(e.openApiJadeOvertimeFormProps.length,"건 등록 중"),open:!0})},onSettled:()=>{M(void 0)},onSuccess:()=>{var e;let t=null===(e=n.getValues("list"))||void 0===e?void 0:e.length;n.reset(),R(),D.invalidateQueries(["jade","getApplList"]),U({children:(0,i.jsx)(I.Z,{children:(0,i.jsxs)(L.Z,{variant:"caption",children:[t,"건의 연장근무 신청이 완료됐습니다."]})}),severity:"success",title:"연장근무 신청 완료"})}}),H=(0,W.useMemo)(()=>{let{year:e,month:t,day:n}=(0,d.K0)();return"".concat(e,"-").concat(t.text,"-").concat(n.text)},[]),J=(0,W.useCallback)(e=>{if(N){var t;let n=null===(t=F.body)||void 0===t?void 0:t.calendarItems.flat();return null==n?void 0:n.find(t=>{let{ymd:n}=t;return n.milliseconds===new Date(e).getTime()})}},[F,N]),Q=(0,W.useCallback)(e=>{var t;let i=J(n.getValues("date")),r="startTime"===e?null==i?void 0:i.startTime:null==i?void 0:i.endTime,s=(0,d.K0)(null==r?void 0:null===(t=r.time)||void 0===t?void 0:t.milliseconds);return(null==r?void 0:r.time)?"".concat(s.hour.text,":").concat(s.minute.text):""},[F]),B=()=>{let e=n.getValues("list");if(!e||0===e.length)return;let t=null==e?void 0:e.map(e=>{var t,n;let i=(0,d.K0)("".concat(e.date,"T").concat(e.startTime)),r=(0,d.K0)("".concat(e.date,"T").concat(e.endTime));return{applUserList:e.to.map(e=>{let{id:t}=e;return t}),completeRefUserList:null===(t=e.ccc)||void 0===t?void 0:t.map(e=>{let{id:t}=e;return t}),date:{day:i.day.value,month:i.month.value,year:i.year},endTime:{hour:r.hour.value,minute:r.minute.value,type:e.endType||2},reason:e.reason,refUserList:null===(n=e.cc)||void 0===n?void 0:n.map(e=>{let{id:t}=e;return t}),startTime:{hour:i.hour.value,minute:i.minute.value,type:e.startType||2},workType:e.workType}});G.mutate({openApiJadeOvertimeFormProps:t})},X=(0,W.useCallback)(e=>{let t=n.getValues("list")||[];if(t.length>10){U({children:(0,i.jsx)(I.Z,{children:(0,i.jsx)(L.Z,{variant:"caption",children:"신청서는 한 번에 10개까지 가능합니다."})}),severity:"error",title:"리스트가 꽉 찼습니다."});return}let r=(0,d.K0)(e.date),s={cc:e.cc,ccc:e.ccc,date:e.date,endTime:e.endTime,endType:e.endType,reason:e.reason,rowDate:"".concat(e.date," (").concat(r.weekday.text,")"),rowImages:e.to.map(e=>e.id),rowTitle:"연장근무 신청 (".concat(e.startTime," ~ ").concat(e.endTime,")"),startTime:e.startTime,startType:e.startType,to:e.to,workType:e.workType};t=t.filter(e=>{let{date:t}=e;return t!==s.date});let a=[...t,s].sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime());n.setValue("list",a)},[n,G,U]),Y=(0,W.useCallback)(e=>{n.setValue("cc",e.cc),n.setValue("ccc",e.ccc),n.setValue("date",e.date),n.setValue("reason",e.reason),n.setValue("startType",e.startType),n.setValue("startTime",e.startTime),n.setValue("endType",e.endType),n.setValue("endTime",e.endTime),n.setValue("to",e.to),n.setValue("workType",e.workType)},[n]),$=(0,W.useCallback)(e=>{let t=n.getValues("list")||[],i=t.filter(t=>t.date!==e.date);n.setValue("list",i)},[n]),ee=(0,W.useCallback)(e=>{let t=n.getValues("startType"),i=n.getValues("endType"),r=n.getValues("startTime"),s=new Date("1970-01-0".concat(t,"T").concat(r,":00")),a=new Date("1970-01-0".concat(i,"T").concat(e,":00"));return s.getTime()<a.getTime()?void 0:"퇴근시간은 출근시간보다 늦어야합니다."},[n]);return(0,W.useEffect)(()=>{var e;n.setValue("workType",(null===(e=J(n.watch("date")))||void 0===e?void 0:e.workType)||{code:9900})},[n,J,n.watch("date")]),(0,W.useEffect)(()=>{n.setValue("to",(null==_?void 0:_.body)||[])},[_]),(0,i.jsx)(m.default,{icon:(0,i.jsx)(w.Z,{color:"primary"}),name:"OverTimeBox",title:"연장근무 신청",children:(0,i.jsx)(r.Z,{form:n,onSubmit:X,children:(0,i.jsxs)(I.Z,{spacing:4,children:[(0,i.jsx)(I.Z,{direction:"row",justifyContent:"end",spacing:2,children:(0,i.jsx)(P.Z,{disabled:0===(n.watch("to")||[]).length,startIcon:(0,i.jsx)(j.Z,{}),type:"submit",variant:"outlined",children:"신청서 큐 등록"})}),(0,i.jsxs)(s.Z,{direction:"row",mobileProps:{direction:void 0},point:"sm",spacing:4,children:[(0,i.jsx)(S.Z,{label:"이름",name:"name",size:"small",value:(null==E?void 0:null===(e=E.body)||void 0===e?void 0:e.name)||"",InputProps:{readOnly:!0,startAdornment:(0,i.jsx)(z.Z,{position:"start",children:(0,i.jsx)(Z.Z,{})})},fullWidth:!0}),(0,i.jsx)(a.Z,{defaultValue:H,label:"날짜",name:"date",size:"small",type:"date",InputProps:{startAdornment:(0,i.jsx)(z.Z,{position:"start",children:(0,i.jsx)(y.Z,{})})},options:{pattern:{message:"유효한 날짜를 입력해주세요.",value:c.Sz.yyyymmddDash},required:{message:"날짜를 입력해주세요.",value:!0},validate:{holiday:e=>{var t;return(null===(t=J(e))||void 0===t?void 0:t.holiday)?"휴일은 선택할 수 없습니다.":void 0}}},fullWidth:!0,required:!0})]}),(0,i.jsxs)(s.Z,{direction:"row",mobileProps:{direction:void 0},point:"sm",spacing:4,children:[(0,i.jsx)(S.Z,{label:"출근",size:"small",value:Q("startTime"),InputProps:{readOnly:!0,startAdornment:(0,i.jsx)(z.Z,{position:"start",children:(0,i.jsx)(x.Z,{})})},fullWidth:!0}),(0,i.jsx)(S.Z,{label:"퇴근",size:"small",value:Q("endTime"),InputProps:{readOnly:!0,startAdornment:(0,i.jsx)(z.Z,{position:"start",children:(0,i.jsx)(x.Z,{})})},fullWidth:!0})]}),(0,i.jsx)(S.Z,{label:"근무 유형",name:"workType",size:"small",value:(null===(t=J(n.watch("date")))||void 0===t?void 0:t.dayName)||"",InputProps:{readOnly:!0,startAdornment:(0,i.jsx)(z.Z,{position:"start",children:(0,i.jsx)(f.Z,{})})},fullWidth:!0}),(0,i.jsx)(C.Z,{}),(0,i.jsxs)(s.Z,{direction:"row",mobileProps:{direction:void 0},point:"sm",spacing:4,children:[(0,i.jsxs)(p.Z,{defaultValue:2,label:"출근 타입",name:"startType",size:"small",startAdornment:(0,i.jsx)(z.Z,{position:"start",children:(0,i.jsx)(g.Z,{})}),fullWidth:!0,required:!0,children:[(0,i.jsx)(A.Z,{value:"2",children:"당일"}),(0,i.jsx)(A.Z,{value:"3",children:"익일"})]}),(0,i.jsx)(l.Z,{defaultValue:"09:30",label:"출근시간",name:"startTime",size:"small",InputProps:{startAdornment:(0,i.jsx)(z.Z,{position:"start",children:(0,i.jsx)(x.Z,{})})},options:{pattern:{message:"유효한 시간을 입력해주세요.",value:c.Sz.hhmm},required:{message:"시간을 입력해주세요.",value:!0}},fullWidth:!0,required:!0})]}),(0,i.jsxs)(s.Z,{direction:"row",mobileProps:{direction:void 0},point:"sm",spacing:4,children:[(0,i.jsxs)(p.Z,{defaultValue:2,label:"퇴근 타입",name:"endType",size:"small",startAdornment:(0,i.jsx)(z.Z,{position:"start",children:(0,i.jsx)(b.Z,{})}),fullWidth:!0,required:!0,children:[(0,i.jsx)(A.Z,{value:"2",children:"당일"}),(0,i.jsx)(A.Z,{value:"3",children:"익일"})]}),(0,i.jsx)(l.Z,{defaultValue:"18:30",label:"퇴근시간",name:"endTime",size:"small",InputProps:{startAdornment:(0,i.jsx)(z.Z,{position:"start",children:(0,i.jsx)(x.Z,{})})},options:{pattern:{message:"유효한 시간을 입력해주세요.",value:c.Sz.hhmm},required:{message:"시간을 입력해주세요.",value:!0},validate:{time:ee}},fullWidth:!0,required:!0})]}),(0,i.jsx)(a.Z,{defaultValue:"연장근무 소요로 인한 연장근무 신청",label:"사유",minRows:2,name:"reason",size:"small",InputProps:{startAdornment:(0,i.jsx)(z.Z,{position:"start",children:(0,i.jsx)(T.Z,{})})},options:{required:{message:"사유를 입력해주세요.",value:!0}},multiline:!0,required:!0}),(0,i.jsx)(C.Z,{}),(0,i.jsx)(h.Z,{}),(0,i.jsx)(C.Z,{}),(0,i.jsx)(I.Z,{direction:"row",justifyContent:"end",spacing:2,children:(0,i.jsx)(P.Z,{disabled:0===(n.watch("to")||[]).length,startIcon:(0,i.jsx)(j.Z,{}),type:"submit",variant:"outlined",children:"신청서 큐 등록"})}),(0,i.jsx)(v.Z,{list:n.watch("list"),onDeleteClick:$,onSelectClick:Y}),(0,i.jsx)(I.Z,{direction:"row",justifyContent:"end",spacing:2,children:(0,i.jsx)(P.Z,{disabled:0===(n.watch("list")||[]).length,startIcon:(0,i.jsx)(j.Z,{}),type:"button",variant:"outlined",onClick:()=>{K({body:"연장근무를 신청하시겠습니까?",confirm:{icon:(0,i.jsx)(j.Z,{}),onClick:()=>{B(),K(void 0)},text:"신청"},title:"연장근무 신청",type:"info"})},children:"등록"})}),(0,i.jsxs)(V.Z,{severity:"info",children:[(0,i.jsx)(k.Z,{children:"안내"}),(0,i.jsx)(I.Z,{children:(0,i.jsx)(L.Z,{variant:"caption",children:"휴일 연장 근무 신청은 지원하지 않습니다."})})]})]})})})}}},function(e){e.O(0,[3433,8119,5173,5641,4786,5748,9420,9497,7604,4017,3849,7595,3577,1101,6565,9831,7316,9104,9982,3244,6615,1040,1511,9813,5624,5001,4207,8802,1744],function(){return e(e.s=56817)}),_N_E=e.O()}]);