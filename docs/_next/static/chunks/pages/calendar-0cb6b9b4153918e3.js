(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[844],{3577:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/calendar",function(){return n(9844)}])},8871:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(3892);class a extends i.Z{async login(){let e=await this.send("/login");return e}async time(){let e=await this.send("/time");return e}async postWorkIn(){let e=await this.sendWithBody("/time/in","POST");return e}async postWorkOut(){let e=await this.sendWithBody("/time/out","POST");return e}async getCalendar(e,t){let n=await this.send("/calendar/".concat(e,"/").concat(t));return n}async postCalendarPlan(e){let t=await this.sendWithBody("/calendar","POST",e);return t}constructor(){super("/jade/v2")}}},9844:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var i=n(5893),a=n(2537),r=n(8871),l=n(3108),s=n(1307),o=n(2097),c=n(1953),d=n(918),h=n(9144),u=n(9630),x=n(7294),p=function(e){let{ymd:t,day:n,dayType:a,dayName:r,weekday:l,workTime:p,noWorkTime:j,workList:Z,today:m,selectable:f,selected:w,onClick:b}=e,g=(0,o.Z)(),{mode:C}=g.palette,y=(0,x.useCallback)(()=>{let e;if(p&&j)e=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Z,{color:g.palette.success[C],fontSize:"inherit",children:p}),(0,i.jsx)(u.Z,{fontSize:"inherit",children:"~"}),(0,i.jsx)(u.Z,{color:g.palette.error[C],fontSize:"inherit",children:j})]});else if(p)e=(0,i.jsx)(u.Z,{color:g.palette.success[C],fontSize:"inherit",children:p});else if(j){let n=/(\d\d\d\d)(\d\d)(\d\d)/.exec(t),a="".concat(n[1],"-").concat(n[2],"-").concat(n[3]),r=new Date(a).getTime(),l=new Date().getTime();e=l<r?(0,i.jsx)(u.Z,{color:g.palette.grey["500"],fontSize:"inherit",children:j}):(0,i.jsx)(u.Z,{color:g.palette.error[C],fontSize:"inherit",children:j})}return e},[g,p,j]),k=(0,x.useCallback)(()=>{let e;return"sun"===a?e=g.palette.error[C]:"sat"===a?e=g.palette.primary[C]:"other"===a&&(e=g.palette.grey["500"]),e},[g,t,a]);return(0,i.jsx)(d.Z,{"data-component":"CalendarItem",sx:{borderRadius:0,flex:"1"},onClick:b,children:(0,i.jsx)(c.Z,{bgcolor:w?"".concat(g.palette.primary[C],"22"):void 0,boxShadow:m?"0px 0px 5px dodgerblue inset":void 0,color:k(),"data-daytype":a,"data-selectable":f,"data-today":m,"data-weekday":l,"data-ymd":t,fontSize:"0.8rem",minHeight:150,padding:2,sx:{"&[data-selectable=true]:hover":{boxShadow:"0px 0px 5px dodgerblue inset",cursor:"pointer"},transition:"0.3s"},children:(0,i.jsxs)(h.Z,{spacing:1,children:[(0,i.jsxs)(h.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(u.Z,{borderRadius:"50%",color:m?"white":void 0,fontSize:"inherit",sx:{backgroundColor:m?"dodgerblue":void 0},textAlign:"center",width:20,children:n}),(0,i.jsx)(u.Z,{fontSize:"inherit",children:r})]}),(0,i.jsxs)(h.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(h.Z,{direction:"row",children:y()}),(0,i.jsx)(u.Z,{fontSize:"inherit",children:(0,s.O8)(l)})]}),(0,i.jsx)(h.Z,{children:Z.map((e,t)=>(0,i.jsx)(u.Z,{fontSize:"inherit",children:e},t))})]})})})},j=n(6065),Z=n(6540),m=n(6172),f=n(8317),w=n(1225),b=n(5084),g=n(6336),C=n(9942),y=n(562),k=n(3711),S=n(2389),T=n(8890),v=n(7484),z=n.n(v),_=n(4480),W=function(e){let{year:t,month:n,calendarItems:a,beforeClick:c,afterClick:d,onPlanSubmit:v}=e,W=(0,o.Z)(),P=(0,w.Z)(W.breakpoints.up("lg")),D=(0,_.Zl)(l.Cw),I=(0,_.Zl)(l.zK),[O,E]=(0,x.useState)([]),[H,K]=(0,x.useState)(!1),[N,M]=(0,x.useState)({end:z()("2022-01-01T21:30"),start:z()("2022-01-01T09:00")}),B=(0,x.useCallback)(async(e,i)=>{I({children:"일정 등록 중",open:!0});let a=new r.Z,l=(0,s.K0)(i.start.toDate()),o=(0,s.K0)(i.end.toDate()),c=await a.postCalendarPlan({end:"".concat(o.hour.text,":").concat(o.minute.text),list:e.map(e=>{let{ymd:t}=e;return t}),month:n,start:"".concat(l.hour.text,":").concat(l.minute.text),year:t});I(void 0);let{status:d}=c;if(d)v&&v();else{let{title:h,message:u}=c;D({body:u,title:h,type:"error"})}},[t,n]),F=(0,x.useCallback)(e=>{let{selectable:t,ymd:n}=e;t&&(O.filter(e=>e.ymd===n).length>0?E(O.filter(e=>e.ymd!==n)):E([e,...O]))},[O,E]),q=(0,x.useCallback)(()=>{K(!1)},[K]),R=(0,x.useCallback)(()=>{K(!0)},[K]),X=(0,x.useCallback)((e,t)=>{t&&M(n=>({...n,[e]:t}))},[M]),A=(0,x.useCallback)(async()=>{K(!1),await B(O,N)},[O,N]),L=(0,x.useCallback)(e=>O.filter(t=>t.ymd===e).length>0,[O]);return(0,i.jsxs)(g.Z,{children:[(0,i.jsxs)(h.Z,{alignItems:"center",justifyContent:"center",maxWidth:1200,minWidth:300,spacing:2,children:[(0,i.jsxs)(h.Z,{direction:"row",spacing:3,children:[(0,i.jsx)(S.Z,{title:"이전 달",arrow:!0,children:(0,i.jsx)(y.Z,{onClick:c,children:(0,i.jsx)(m.Z,{})})}),(0,i.jsxs)(h.Z,{direction:"row",spacing:1,children:[(0,i.jsx)(u.Z,{fontWeight:"bold",variant:"h4",children:t}),(0,i.jsx)(u.Z,{fontWeight:"bold",variant:"h4",children:n})]}),(0,i.jsx)(S.Z,{title:"다음 달",arrow:!0,children:(0,i.jsx)(y.Z,{onClick:d,children:(0,i.jsx)(f.Z,{})})})]}),P?(0,i.jsx)(S.Z,{title:O.length>0?"클릭하여 일정을 등록하세요":"하나 이상의 일정을 선택하세요",arrow:!0,children:(0,i.jsx)(h.Z,{alignSelf:"end",children:(0,i.jsx)(b.Z,{disabled:0===O.length,startIcon:(0,i.jsx)(Z.Z,{}),variant:"outlined",onClick:R,children:"일정 등록"})})}):null,(0,i.jsx)(h.Z,{"data-component":"CalendarList",width:"100%",children:null==a?void 0:a.map((e,t)=>(0,i.jsx)(h.Z,{direction:P?"row":"column",children:e.map((e,t)=>(0,i.jsx)(p,{selected:L(e.ymd),onClick:()=>F(e),...e},t))},t))}),P?null:(0,i.jsx)(C.Z,{in:O.length>0,children:(0,i.jsx)(h.Z,{bottom:25,position:"fixed",width:"80%",children:(0,i.jsx)(b.Z,{disabled:0===O.length,startIcon:(0,i.jsx)(Z.Z,{}),variant:"contained",onClick:R,children:"일정 등록"})})})]}),(0,i.jsx)(j.Z,{open:H,title:"근무 계획 등록",type:"info",confirm:{icon:(0,i.jsx)(Z.Z,{}),onClick:()=>A(),text:"등록"},onClose:q,children:(0,i.jsxs)(h.Z,{paddingTop:2,spacing:3,children:[(0,i.jsx)(T.j,{ampm:!1,inputFormat:"HH:mm",label:"출근 시간",maxTime:z()("2022-01-01T11:00"),minTime:z()("2022-01-01T06:31"),renderInput:e=>(0,i.jsx)(k.Z,{helperText:"06:31 ~ 11:00까지 지정 가능",name:"start",size:"small",required:!0,...e}),value:N.start,onChange:e=>X("start",e)}),(0,i.jsx)(T.j,{ampm:!1,inputFormat:"HH:mm",label:"퇴근 시간",maxTime:z()("2022-01-01T22:29"),minTime:z()("2022-01-01T17:00"),renderInput:e=>(0,i.jsx)(k.Z,{helperText:"17:00 ~ 22:29까지 지정 가능",name:"end",size:"small",required:!0,...e}),value:N.end,onChange:e=>X("end",e)})]})})]})},P=function(){let e=(0,_.Zl)(l.zK),[t,n]=(0,x.useState)(new Date),[a,o]=(0,x.useState)();(0,x.useEffect)(()=>{(async()=>{await d()})()},[t]);let c=async(e,t)=>{let n=new r.Z,i=await n.getCalendar(e,t);return i},d=(0,x.useCallback)(async()=>{if(t){let n=(0,s.K0)(t);e({children:"".concat(n.year.toString(),"년 ").concat(n.month.text,"월 캘린더 불러오는 중"),open:!0});let i=await c(n.year.toString(),n.month.text);e(void 0);let{status:a}=i;a&&o(i.body)}},[t]),h=(0,x.useCallback)(()=>{n(new Date(t.setMonth(t.getMonth()-1)))},[t]),u=(0,x.useCallback)(()=>{n(new Date(t.setMonth(t.getMonth()+1)))},[t]),p=(0,x.useCallback)(async()=>{await d()},[t]);return(0,i.jsx)(W,{...a,afterClick:u,beforeClick:h,onPlanSubmit:p})},D=n(8310),I=n(9113);function O(){return(0,i.jsxs)(I.Z,{children:[(0,i.jsx)(a.Z,{title:"근태 현황",url:"/calendar"}),(0,i.jsx)(D.Z,{children:(0,i.jsx)(P,{})})]})}}},function(e){e.O(0,[378,285,515,774,888,179],function(){return e(e.s=3577)}),_N_E=e.O()}]);