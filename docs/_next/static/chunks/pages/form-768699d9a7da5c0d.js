(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[894],{4383:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/form",function(){return n(9586)}])},1901:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(5893),r=n(7536),o=function(e){let{form:t,onSubmit:n,...o}=e,l=(0,r.cI)(),s=t||l;return(0,i.jsx)(r.RV,{...s,children:(0,i.jsx)("form",{"data-component":"Form",onSubmit:s.handleSubmit(n),...o})})}},4794:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=n(5893),r=n(2097),o=n(1225),l=n(9144),s=function(e){let{point:t,mobileProps:n,...s}=e,a=(0,r.Z)(),c=(0,o.Z)(a.breakpoints.up(t||"lg"));return(0,i.jsx)(l.Z,{"data-component":"ResponsiveStack",...c?s:{...s,...n}})}},413:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i=n(5893),r=n(7836),o=n(7536),l=function(e){var t,n;let{name:l,error:s,helperText:a,options:c,...d}=e,{register:h,formState:u}=(0,o.Gc)();return(0,i.jsx)(r.Z,{"data-component":"TextFormField",error:s||void 0!==u.errors[l],helperText:(null===(t=u.errors[l])||void 0===t?void 0:null===(n=t.message)||void 0===n?void 0:n.toString())||a,...d,...h(l,c)})}},3017:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(5893),r=n(918),o=n(9144),l=n(9630),s=n(3602);function a(e){let{name:t="BoxPaper",icon:n,title:a,sx:c,children:d,...h}=e;return(0,i.jsx)(s.E.div,{"data-component":t,transition:{duration:.5},variants:{init:{opacity:0,translateY:50,width:"100%"},show:{opacity:1,translateY:0}},children:(0,i.jsx)(r.Z,{sx:{width:"100%",...c},...h,children:(0,i.jsxs)(o.Z,{borderRadius:5,padding:4,spacing:4,width:"100%",children:[(0,i.jsx)(o.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",width:"100%",children:(0,i.jsxs)(o.Z,{alignItems:"center",direction:"row",spacing:1,children:[n,(0,i.jsx)(l.Z,{fontWeight:"bold",variant:"h6",children:a})]})}),d]})})})}},6142:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(5893),r=n(5343),o=n(2631),l=n(8316),s=n(6541),a=n(7536),c=function(e){var t,n;let{name:c,error:d,helperText:h,...u}=e,{formState:x,control:j}=(0,a.Gc)();return(0,i.jsxs)(r.Z,{"data-component":"FormSelect",fullWidth:u.fullWidth,children:[(0,i.jsx)(l.Z,{error:d||void 0!==x.errors[c],required:!0,children:u.label}),(0,i.jsx)(a.Qr,{control:j,name:c,render(e){let{field:t}=e;return(0,i.jsx)(s.Z,{...t,...u})}}),(0,i.jsx)(o.Z,{error:d||void 0!==x.errors[c],children:(null===(t=x.errors[c])||void 0===t?void 0:null===(n=t.message)||void 0===n?void 0:n.toString())||h})]})}},9741:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=n(5893),r=n(9144),o=function(e){let{name:t="ContentStack",alignItems:n="center",justifyContent:o="center",maxWidth:l=1200,minWidth:s=320,spacing:a=2,width:c="100%",...d}=e;return(0,i.jsx)(r.Z,{alignItems:n,"data-component":t,justifyContent:o,maxWidth:l,minWidth:s,spacing:a,width:c,...d})},l=n(3602),s=function(e){let{name:t="TemplateStack",innerStackProps:n,children:s,...a}=e;return(0,i.jsx)(l.E.div,{animate:"show",initial:"init",style:{width:"100%"},transition:{staggerChildren:.3},children:(0,i.jsx)(r.Z,{alignItems:"center",component:"article","data-component":t,padding:2,...a,children:(0,i.jsx)(o,{...n,children:s})})})}},9958:function(e,t,n){"use strict";var i=n(7412);t.Z=i.Z},9586:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Q}});var i=n(5893),r=n(4626),o=n(9958),l=n(9741),s=n(1901),a=n(2227),c=n(1254),d=n(5865),h=n(1955),u=n(3017),x=n(5158),j=n(7536),Z=function(e){let{name:t,...n}=e,{register:r}=(0,j.Gc)();return(0,i.jsx)(x.Z,{...n,...r(t)})},p=n(4794),m=n(413),f=n(6142),g=n(2761),v=n(1953),w=n(4225),y=n(2841),b=n(2416),C=n(60),S=n(9144);function I(){return(0,i.jsxs)(S.Z,{"data-component":"FormBoxFilter",paddingBottom:2,paddingTop:2,spacing:2,children:[(0,i.jsxs)(p.Z,{direction:"row",mobileProps:{direction:void 0},point:"sm",spacing:2,children:[(0,i.jsx)(v.Z,{minWidth:"50%",children:(0,i.jsx)(f.Z,{label:"타입",name:"type",size:"small",fullWidth:!0,required:!0,children:(0,i.jsx)(C.Z,{value:"0",children:"전체"})})}),(0,i.jsx)(m.Z,{label:"시작일자",name:"start",size:"small",type:"date",fullWidth:!0,required:!0}),(0,i.jsx)(m.Z,{label:"종료일자",name:"end",size:"small",type:"date",fullWidth:!0,required:!0})]}),(0,i.jsxs)(p.Z,{direction:"row",mobileProps:{direction:void 0},point:"sm",spacing:2,children:[(0,i.jsx)(m.Z,{label:"키워드",name:"keyword",size:"small",fullWidth:!0}),(0,i.jsx)(v.Z,{minWidth:100,children:(0,i.jsxs)(f.Z,{label:"페이지",name:"size",size:"small",fullWidth:!0,required:!0,children:[(0,i.jsx)(C.Z,{value:10,children:"10"}),(0,i.jsx)(C.Z,{value:20,children:"20"}),(0,i.jsx)(C.Z,{value:30,children:"30"}),(0,i.jsx)(C.Z,{value:50,children:"50"}),(0,i.jsx)(C.Z,{value:100,children:"100"})]})})]}),(0,i.jsxs)(p.Z,{direction:"row",point:"sm",spacing:2,children:[(0,i.jsx)(b.Z,{children:(0,i.jsx)(y.Z,{control:(0,i.jsx)(Z,{name:"status",value:900}),label:"승인"})}),(0,i.jsx)(b.Z,{children:(0,i.jsx)(y.Z,{control:(0,i.jsx)(Z,{name:"status",value:200}),label:"진행중"})}),(0,i.jsx)(b.Z,{children:(0,i.jsx)(y.Z,{control:(0,i.jsx)(Z,{name:"status",value:300}),label:"반려"})})]}),(0,i.jsx)(w.Z,{startIcon:(0,i.jsx)(g.Z,{}),type:"submit",variant:"contained",children:"검색"})]})}var z=n(1523),W=n(7036),k=n(594),E=n(9369),M=n(6730),_=n(2097),F=n(4373),D=n(9630),P=n(3602),R=n(7294),V=function(e){let{id:t,category:n,code:r,name:o,reason:l,status:s,timestamp:a}=e,c=(0,j.Gc)(),{palette:{divider:h,success:u,warning:Z,error:p,text:m}}=(0,_.Z)(),f=(0,R.useMemo)(()=>900===s?u.light:200===s?Z.light:p.light,[s,u,Z,p]),g=(0,R.useMemo)(()=>900===s?(0,i.jsx)(W.Z,{fontSize:"large"}):200===s?(0,i.jsx)(E.Z,{fontSize:"large"}):(0,i.jsx)(k.Z,{fontSize:"large"}),[s]),w=(0,R.useMemo)(()=>{let e=c.watch("list");if(e.filter(e=>{let{applId:n}=e;return n===t}).length>0&&200===s)return"".concat(Z.light,"22")},[c,t,s]),y=(0,R.useMemo)(()=>{let e=(0,d.K0)(a);return"".concat(e.year,"-").concat(e.month.text,"-").concat(e.day.text," (").concat(e.weekday.text,") ").concat(e.hour.text,":").concat(e.minute.text,":").concat(e.second.text)},[a]);return(0,i.jsxs)(S.Z,{bgcolor:w,border:"3px solid",borderColor:f,borderRadius:2,boxShadow:"3px 3px 16px ".concat(h),direction:"row",overflow:"hidden",children:[(0,i.jsxs)(S.Z,{borderRight:"5px dashed ".concat(f),flex:1,padding:2,spacing:2,children:[(0,i.jsx)(S.Z,{direction:"row",children:(0,i.jsxs)(S.Z,{flex:1,children:[(0,i.jsxs)(S.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",spacing:1,children:[(0,i.jsx)(D.Z,{variant:"caption",children:n}),(0,i.jsxs)(S.Z,{alignItems:"center",color:m.disabled,direction:"row",fontSize:"0.8rem",justifyContent:"end",spacing:.5,children:[(0,i.jsx)(z.Z,{color:"inherit",fontSize:"inherit"}),(0,i.jsx)(D.Z,{color:m.disabled,fontSize:"0.8rem",children:t})]})]}),(0,i.jsx)(D.Z,{color:f,fontWeight:"bold",variant:"h5",children:o})]})}),(0,i.jsx)(D.Z,{color:m.disabled,flex:1,fontSize:"0.8rem",children:l}),(0,i.jsx)(F.Z,{}),(0,i.jsxs)(S.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(v.Z,{children:200===s?(0,i.jsx)(x.Z,{color:"warning",size:"small",sx:{padding:0},onChange(e,n){if(n){let i=c.getValues("list");i.push({applCode:r,applId:t}),c.setValue("list",i)}else{let o=c.getValues("list").filter(e=>{let{applId:n}=e;return n!==t});c.setValue("list",o)}}}):null}),(0,i.jsxs)(S.Z,{alignItems:"center",color:m.disabled,direction:"row",fontSize:"0.8rem",justifyContent:"end",spacing:.5,children:[(0,i.jsx)(M.Z,{color:"inherit",fontSize:"inherit"}),(0,i.jsx)(D.Z,{color:"inherit",fontSize:"inherit",children:y})]})]})]}),(0,i.jsx)(S.Z,{bgcolor:f,justifyContent:"center",padding:2,children:(0,i.jsx)(P.E.div,{animate:{scale:[0,1.2,1]},transition:{delay:.5,duration:.5},children:(0,i.jsx)(S.Z,{alignItems:"center",color:"white",justifyContent:"center",children:g})})})]})},q=n(9217),N=n(6299),T=n(1733),K=n(1849),Y=n(2741),A=n(8391),G=n(1893),B=n(6305),O=n(5820),H=n(4480),X=function(){let e=(0,d.K0)(new Date().setMonth(new Date().getMonth()-6)),t=(0,d.K0)(),{palette:{success:n,warning:r,error:o}}=(0,_.Z)(),[l,x]=(0,B.H)(),Z=(0,R.useRef)(null),p=(0,H.Zl)(c.Cw),m=(0,H.Zl)(c.zK),f=(0,j.cI)({defaultValues:{end:"".concat(t.year,"-").concat(t.month.text,"-").concat(t.day.text),size:10,start:"".concat(e.year,"-").concat(e.month.text,"-").concat(e.day.text),type:"0"}}),g=(0,j.cI)({defaultValues:{list:[]}}),[y,b]=(0,R.useState)("hide"),[C,z]=(0,R.useState)({endDay:t.day.value,endMonth:t.month.value,endYear:t.year,page:1,size:10,startDay:e.day.value,startMonth:e.month.value,startYear:e.year}),W=h.Z.useGetApplInfiniteList(C),k=h.Z.useDeleteForm({onMutate(e){m({children:"신청 내역 ".concat(e.openApiRequestDeleteFormProps.length,"건 삭제 중"),open:!0})},onSettled(){m(void 0)},onSuccess(){p(void 0),W.refetch(),g.setValue("list",[])}}),{data:E,hasNextPage:M,fetchNextPage:X,isSuccess:L,isLoading:Q,isRefetching:J,refetch:U,remove:$}=W,ee=(0,R.useMemo)(()=>null==E?void 0:E.pages.flat().flatMap(e=>{let{list:t}=e;return t}),[E]),et=(0,R.useCallback)(e=>{let{start:t,end:n,keyword:i,type:r,size:o,status:l}=e,s=(0,d.K0)(t),a=(0,d.K0)(n);z({endDay:a.day.value,endMonth:a.month.value,endYear:a.year,keyword:((null==i?void 0:i.length)||0)>0?i:void 0,page:1,size:o,startDay:s.day.value,startMonth:s.month.value,startYear:s.year,status:l,type:"0"===r?void 0:r})},[z]);(0,R.useEffect)(()=>{let e=new IntersectionObserver(e=>{e.forEach(e=>{let{isIntersecting:t}=e;t&&M&&X()})},{threshold:1});return Z.current&&e.observe(Z.current),()=>{e.disconnect()}},[Z.current,M,X]),(0,R.useEffect)(()=>{l.current&&("show"===y?x(l.current,{height:l.current.scrollHeight}):x(l.current,{height:0,overflow:"hidden"}))},[l.current,y]);let en=(0,R.useCallback)(e=>{p({body:"선택한 내역 ".concat(e.list.length,"건을 삭제하시겠습니까?"),confirm:{onClick(){k.mutate({openApiRequestDeleteFormProps:e.list})}},title:"신청 내역 삭제",type:"info"})},[]);return(0,i.jsx)(u.Z,{"data-component":"FormBox",icon:(0,i.jsx)(N.Z,{color:"primary"}),title:"신청 내역",children:(0,i.jsxs)(S.Z,{spacing:2,children:[(0,i.jsxs)(Y.Z,{severity:"info",children:[(0,i.jsx)(A.Z,{children:"안내"}),(0,i.jsxs)(S.Z,{children:[(0,i.jsx)(D.Z,{variant:"caption",children:"상세 필터를 통해 원하는 조건을 지정하여 검색할 수 있습니다."}),(0,i.jsx)(D.Z,{variant:"caption",children:"결재가 진행 중인 신청서 티켓의 좌측 하단 체크박스를 선택하고, 리스트 상단 우측의 삭제 버튼을 통해 신청서를 일괄삭제할 수 있습니다."}),(0,i.jsxs)(D.Z,{variant:"caption",children:["승인된 신청은 ",(0,i.jsx)(D.Z,{color:n.light,component:"span",fontWeight:"bold",variant:"caption",children:"녹색"}),", 진행 중인 신청은 ",(0,i.jsx)(D.Z,{color:r.light,component:"span",fontWeight:"bold",variant:"caption",children:"주황색"}),", 반려된 신청은 ",(0,i.jsx)(D.Z,{color:o.light,component:"span",fontWeight:"bold",variant:"caption",children:"적색"}),"으로 표시됩니다."]})]})]}),(0,i.jsx)(P.E.div,{ref:l,transition:{duration:.5},initial:{height:0,overflow:"hidden"},children:(0,i.jsx)(s.Z,{form:f,onSubmit:et,children:(0,i.jsx)(I,{})})}),(0,i.jsx)(w.Z,{variant:"text",endIcon:(0,i.jsx)(P.E.div,{animate:y,transition:{duration:.3},variants:{hide:{rotateZ:"180deg"},show:{rotateZ:0}},children:(0,i.jsx)(S.Z,{children:(0,i.jsx)(q.Z,{})})}),onClick:()=>b(e=>"show"===e?"hide":"show"),children:"상세필터 열기"}),(0,i.jsx)(F.Z,{}),(0,i.jsxs)(S.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",spacing:2,children:[(0,i.jsx)(G.Z,{title:"새로고침",arrow:!0,children:(0,i.jsx)(w.Z,{sx:{minWidth:36,width:36},variant:"outlined",onClick(){$(),U()},children:(0,i.jsx)(K.Z,{})})}),(0,i.jsx)(G.Z,{title:g.watch("list").length>0?"선택한 신청 내역 삭제":"삭제할 신청 내역을 선택하세요.",arrow:!0,children:(0,i.jsx)(v.Z,{children:(0,i.jsx)(w.Z,{disabled:0===g.watch("list").length,startIcon:(0,i.jsx)(T.Z,{}),variant:"outlined",onClick(){g.handleSubmit(en)()},children:"삭제"})})})]}),(0,i.jsxs)(S.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(S.Z,{alignItems:"center",direction:"row",spacing:2,children:(0,i.jsx)(D.Z,{textAlign:"end",children:L?"".concat(E.pages[0].totalPage," 중 ").concat(E.pages.length," 페이지"):""})}),(0,i.jsx)(D.Z,{textAlign:"end",children:L?"총 ".concat(E.pages[0].totalCount,"개"):""})]}),(0,i.jsx)(O.M,{children:(0,i.jsx)(P.E.div,{animate:L?"show":"hide",exit:L?"hide":"show",initial:L?"hide":"show",transition:{staggerChildren:.05},children:(0,i.jsxs)(S.Z,{spacing:2,children:[Q?(0,i.jsx)(v.Z,{alignSelf:"center",maxWidth:400,width:"100%",children:(0,i.jsx)(a.Z,{iconName:"paperplane"})}):null,L?null==ee?void 0:ee.map(e=>{let{category:t,applType:n,applName:r,id:o,reason:l,status:a,timestamp:c}=e;return(0,i.jsx)(P.E.div,{variants:{hide:{opacity:0,scale:.5},show:{opacity:1,scale:1}},layout:!0,children:(0,i.jsx)(s.Z,{form:g,onSubmit:en,children:(0,i.jsx)(V,{category:t,code:n,id:o,name:r,reason:l,status:a,timestamp:c})})},"".concat(n,"-").concat(o))}):null,((null==ee?void 0:ee.length)||0)>9?(0,i.jsx)(S.Z,{alignItems:"center",justifyContent:"center",ref:Z,children:J?(0,i.jsx)(v.Z,{height:100,width:100,children:(0,i.jsx)(a.Z,{iconName:"loading"})}):null}):null]})})})]})})},L=function(){return(0,i.jsx)(l.Z,{name:"FormTemplate",children:(0,i.jsx)(X,{})})};function Q(){return(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(r.Z,{title:"신청 내역",url:"/form"}),(0,i.jsx)(L,{})]})}}},function(e){e.O(0,[296,928,664,181,260,595,536,893,108,497,338,412,227,774,888,179],function(){return e(e.s=4383)}),_N_E=e.O()}]);